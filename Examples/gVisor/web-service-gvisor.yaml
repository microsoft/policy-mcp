# yaml-language-server: $schema=https://raw.githubusercontent.com/microsoft/policy-mcp/main/schema/v1.json

version: "1.0"
description: "gVisor-sandboxed web service with minimal host access"
permissions:
  storage:
    allow:
    - uri: "fs://work/agent/config/**"
      access: ["read"]
    - uri: "fs://work/agent/logs/**"
      access: ["read", "write"]
  network:
    allow:
    # defaults: true allows the built-in HTTP egress list.
    # See DEFAULTS.md for the full domain list.
    - defaults: true
  environment:
    allow:
    - key: "PATH"
    - key: "PORT"
  runtime:
    # Run containers with --runtime=runsc (gVisor) to enable syscall sandboxing.
    docker:
      security:
        privileged: false
        no_new_privileges: true
        capabilities:
          drop: ["ALL"]
          add: ["NET_BIND_SERVICE"] # needed for binding to ports below 1024 (e.g., 80/443)
  resources:
    cpu: 75.0 # 75% of a single vCPU core (0-100)
    memory: 1024 # MB
